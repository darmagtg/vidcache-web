#!/usr/bin/php
<?php
require('boot.php');

use \Vidcache\Admin\Client\Embed;
use \Vidcache\Admin\Node;

dolog('Beginning to push embed objects');
//this script pushes embed templates to all nodes
$nodes = Node::fetchAll();
//look templates and push
foreach(Embed::fetchAllObjects() as $embed){
	foreach($nodes as $node){
		$rv = Embed::pushObject($node['hostname'],$embed);
		if(!$rv)
			dolog('Failed to push vars: '.$embed['handle'].' - '.$rv,LOG_WARN);	
	}
}
dolog('Embed object push complete');
